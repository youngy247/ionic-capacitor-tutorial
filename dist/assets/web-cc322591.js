import{t as U,W as $,_ as H,M as _,L as T}from"./index-efe07a2c.js";var W=function i(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,s,o;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(s=n;s--!==0;)if(!i(t[s],e[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(e,o[s]))return!1;for(s=n;s--!==0;){var r=o[s];if(!i(t[r],e[r]))return!1}return!0}return t!==t&&e!==e};const Z=U(W);function P(i,t,e,n,s,o){if(s-n<=e)return;const r=n+s>>1;D(i,t,r,n,s,o%2),P(i,t,e,n,r-1,o+1),P(i,t,e,r+1,s,o+1)}function D(i,t,e,n,s,o){for(;s>n;){if(s-n>600){const c=s-n+1,d=e-n+1,u=Math.log(c),h=.5*Math.exp(2*u/3),m=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),p=Math.max(n,Math.floor(e-d*h/c+m)),f=Math.min(s,Math.floor(e+(c-d)*h/c+m));D(i,t,e,p,f,o)}const r=t[2*e+o];let l=n,a=s;for(M(i,t,n,e),t[2*s+o]>r&&M(i,t,n,s);l<a;){for(M(i,t,l,a),l++,a--;t[2*l+o]<r;)l++;for(;t[2*a+o]>r;)a--}t[2*n+o]===r?M(i,t,n,a):(a++,M(i,t,a,s)),a<=e&&(n=a+1),e<=a&&(s=a-1)}}function M(i,t,e,n){b(i,e,n),b(t,2*e,2*n),b(t,2*e+1,2*n+1)}function b(i,t,e){const n=i[t];i[t]=i[e],i[e]=n}function K(i,t,e,n,s,o,r){const l=[0,i.length-1,0],a=[];let c,d;for(;l.length;){const u=l.pop(),h=l.pop(),m=l.pop();if(h-m<=r){for(let g=m;g<=h;g++)c=t[2*g],d=t[2*g+1],c>=e&&c<=s&&d>=n&&d<=o&&a.push(i[g]);continue}const p=Math.floor((m+h)/2);c=t[2*p],d=t[2*p+1],c>=e&&c<=s&&d>=n&&d<=o&&a.push(i[p]);const f=(u+1)%2;(u===0?e<=c:n<=d)&&(l.push(m),l.push(p-1),l.push(f)),(u===0?s>=c:o>=d)&&(l.push(p+1),l.push(h),l.push(f))}return a}function V(i,t,e,n,s,o){const r=[0,i.length-1,0],l=[],a=s*s;for(;r.length;){const c=r.pop(),d=r.pop(),u=r.pop();if(d-u<=o){for(let g=u;g<=d;g++)A(t[2*g],t[2*g+1],e,n)<=a&&l.push(i[g]);continue}const h=Math.floor((u+d)/2),m=t[2*h],p=t[2*h+1];A(m,p,e,n)<=a&&l.push(i[h]);const f=(c+1)%2;(c===0?e-s<=m:n-s<=p)&&(r.push(u),r.push(h-1),r.push(f)),(c===0?e+s>=m:n+s>=p)&&(r.push(h+1),r.push(d),r.push(f))}return l}function A(i,t,e,n){const s=i-e,o=t-n;return s*s+o*o}const J=i=>i[0],X=i=>i[1];class B{constructor(t,e=J,n=X,s=64,o=Float64Array){this.nodeSize=s,this.points=t;const r=t.length<65536?Uint16Array:Uint32Array,l=this.ids=new r(t.length),a=this.coords=new o(t.length*2);for(let c=0;c<t.length;c++)l[c]=c,a[2*c]=e(t[c]),a[2*c+1]=n(t[c]);P(l,a,s,0,l.length-1,0)}range(t,e,n,s){return K(this.ids,this.coords,t,e,n,s,this.nodeSize)}within(t,e,n){return V(this.ids,this.coords,t,e,n,this.nodeSize)}}const Q={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:i=>i},I=Math.fround||(i=>t=>(i[0]=+t,i[0]))(new Float32Array(1));class q{constructor(t){this.options=w(Object.create(Q),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:n,maxZoom:s,nodeSize:o}=this.options;e&&console.time("total time");const r="prepare ".concat(t.length," points");e&&console.time(r),this.points=t;let l=[];for(let a=0;a<t.length;a++)t[a].geometry&&l.push(tt(t[a],a));this.trees[s+1]=new B(l,N,j,o,Float32Array),e&&console.timeEnd(r);for(let a=s;a>=n;a--){const c=+Date.now();l=this._cluster(l,a),this.trees[a]=new B(l,N,j,o,Float32Array),e&&console.log("z%d: %d clusters in %dms",a,l.length,+Date.now()-c)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const s=Math.max(-90,Math.min(90,t[1]));let o=t[2]===180?180:((t[2]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,o=180;else if(n>o){const d=this.getClusters([n,s,180,r],e),u=this.getClusters([-180,s,o,r],e);return d.concat(u)}const l=this.trees[this._limitZoom(e)],a=l.range(C(n),k(r),C(o),k(s)),c=[];for(const d of a){const u=l.points[d];c.push(u.numPoints?z(u):this.points[u.index])}return c}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),s="No cluster with the specified id.",o=this.trees[n];if(!o)throw new Error(s);const r=o.points[e];if(!r)throw new Error(s);const l=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=o.within(r.x,r.y,l),c=[];for(const d of a){const u=o.points[d];u.parentId===t&&c.push(u.numPoints?z(u):this.points[u.index])}if(c.length===0)throw new Error(s);return c}getLeaves(t,e,n){e=e||10,n=n||0;const s=[];return this._appendLeaves(s,t,e,n,0),s}getTile(t,e,n){const s=this.trees[this._limitZoom(t)],o=Math.pow(2,t),{extent:r,radius:l}=this.options,a=l/r,c=(n-a)/o,d=(n+1+a)/o,u={features:[]};return this._addTileFeatures(s.range((e-a)/o,c,(e+1+a)/o,d),s.points,e,n,o,u),e===0&&this._addTileFeatures(s.range(1-a/o,c,1,d),s.points,o,n,o,u),e===o-1&&this._addTileFeatures(s.range(0,c,a/o,d),s.points,-1,n,o,u),u.features.length?u:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,n.length!==1)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,s,o){const r=this.getChildren(e);for(const l of r){const a=l.properties;if(a&&a.cluster?o+a.point_count<=s?o+=a.point_count:o=this._appendLeaves(t,a.cluster_id,n,s,o):o<s?o++:t.push(l),t.length===n)break}return o}_addTileFeatures(t,e,n,s,o,r){for(const l of t){const a=e[l],c=a.numPoints;let d,u,h;if(c)d=F(a),u=a.x,h=a.y;else{const f=this.points[a.index];d=f.properties,u=C(f.geometry.coordinates[0]),h=k(f.geometry.coordinates[1])}const m={type:1,geometry:[[Math.round(this.options.extent*(u*o-n)),Math.round(this.options.extent*(h*o-s))]],tags:d};let p;c?p=a.id:this.options.generateId?p=a.index:this.points[a.index].id&&(p=this.points[a.index].id),p!==void 0&&(m.id=p),r.features.push(m)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const n=[],{radius:s,extent:o,reduce:r,minPoints:l}=this.options,a=s/(o*Math.pow(2,e));for(let c=0;c<t.length;c++){const d=t[c];if(d.zoom<=e)continue;d.zoom=e;const u=this.trees[e+1],h=u.within(d.x,d.y,a),m=d.numPoints||1;let p=m;for(const f of h){const g=u.points[f];g.zoom>e&&(p+=g.numPoints||1)}if(p>m&&p>=l){let f=d.x*m,g=d.y*m,v=r&&m>1?this._map(d,!0):null;const x=(c<<5)+(e+1)+this.points.length;for(const R of h){const y=u.points[R];if(y.zoom<=e)continue;y.zoom=e;const S=y.numPoints||1;f+=y.x*S,g+=y.y*S,y.parentId=x,r&&(v||(v=this._map(d,!0)),r(v,this._map(y)))}d.parentId=x,n.push(Y(f/p,g/p,x,p,v))}else if(n.push(d),p>1)for(const f of h){const g=u.points[f];g.zoom<=e||(g.zoom=e,n.push(g))}}return n}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?w({},t.properties):t.properties;const n=this.points[t.index].properties,s=this.options.map(n);return e&&s===n?w({},s):s}}function Y(i,t,e,n,s){return{x:I(i),y:I(t),zoom:1/0,id:e,parentId:-1,numPoints:n,properties:s}}function tt(i,t){const[e,n]=i.geometry.coordinates;return{x:I(C(e)),y:I(k(n)),zoom:1/0,index:t,parentId:-1}}function z(i){return{type:"Feature",id:i.id,properties:F(i),geometry:{type:"Point",coordinates:[et(i.x),nt(i.y)]}}}function F(i){const t=i.numPoints,e=t>=1e4?"".concat(Math.round(t/1e3),"k"):t>=1e3?"".concat(Math.round(t/100)/10,"k"):t;return w(w({},i.properties),{cluster:!0,cluster_id:i.id,point_count:t,point_count_abbreviated:e})}function C(i){return i/360+.5}function k(i){const t=Math.sin(i*Math.PI/180),e=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return e<0?0:e>1?1:e}function et(i){return(i-.5)*360}function nt(i){const t=(180-i*360)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function w(i,t){for(const e in t)i[e]=t[e];return i}function N(i){return i.x}function j(i){return i.y}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function st(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(e[n[s]]=i[n[s]]);return e}class E{constructor({markers:t,position:e}){this.markers=t,e&&(e instanceof google.maps.LatLng?this._position=e:this._position=new google.maps.LatLng(e))}get bounds(){if(!(this.markers.length===0&&!this._position))return this.markers.reduce((t,e)=>t.extend(e.getPosition()),new google.maps.LatLngBounds(this._position,this._position))}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(t=>t.getVisible()).length}push(t){this.markers.push(t)}delete(){this.marker&&(this.marker.setMap(null),delete this.marker),this.markers.length=0}}class ot{constructor({maxZoom:t=16}){this.maxZoom=t}noop({markers:t}){return it(t)}}const it=i=>i.map(e=>new E({position:e.getPosition(),markers:[e]}));class G extends ot{constructor(t){var{maxZoom:e,radius:n=60}=t,s=st(t,["maxZoom","radius"]);super({maxZoom:e}),this.superCluster=new q(Object.assign({maxZoom:this.maxZoom,radius:n},s)),this.state={zoom:null}}calculate(t){let e=!1;if(!Z(t.markers,this.markers)){e=!0,this.markers=[...t.markers];const s=this.markers.map(o=>({type:"Feature",geometry:{type:"Point",coordinates:[o.getPosition().lng(),o.getPosition().lat()]},properties:{marker:o}}));this.superCluster.load(s)}const n={zoom:t.map.getZoom()};return e||this.state.zoom>this.maxZoom&&n.zoom>this.maxZoom||(e=e||!Z(this.state,n)),this.state=n,e&&(this.clusters=this.cluster(t)),{clusters:this.clusters,changed:e}}cluster({map:t}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(this.transformCluster.bind(this))}transformCluster({geometry:{coordinates:[t,e]},properties:n}){if(n.cluster)return new E({markers:this.superCluster.getLeaves(n.cluster_id,1/0).map(s=>s.properties.marker),position:new google.maps.LatLng({lat:e,lng:t})});{const s=n.marker;return new E({markers:[s],position:s.getPosition()})}}}class rt{constructor(t,e){this.markers={sum:t.length};const n=e.map(o=>o.count),s=n.reduce((o,r)=>o+r,0);this.clusters={count:e.length,markers:{mean:s/e.length,sum:s,min:Math.min(...n),max:Math.max(...n)}}}}class at{render({count:t,position:e},n){const s=t>Math.max(10,n.clusters.markers.mean)?"#ff0000":"#0000ff",o=window.btoa('\n  <svg fill="'.concat(s,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240">\n    <circle cx="120" cy="120" opacity=".6" r="70" />\n    <circle cx="120" cy="120" opacity=".3" r="90" />\n    <circle cx="120" cy="120" opacity=".2" r="110" />\n  </svg>'));return new google.maps.Marker({position:e,icon:{url:"data:image/svg+xml;base64,".concat(o),scaledSize:new google.maps.Size(45,45)},label:{text:String(t),color:"rgba(255,255,255,0.9)",fontSize:"12px"},title:"Cluster of ".concat(t," markers"),zIndex:Number(google.maps.Marker.MAX_ZINDEX)+t})}}function lt(i,t){for(let e in t.prototype)i.prototype[e]=t.prototype[e]}class O{constructor(){lt(O,google.maps.OverlayView)}}var L;(function(i){i.CLUSTERING_BEGIN="clusteringbegin",i.CLUSTERING_END="clusteringend",i.CLUSTER_CLICK="click"})(L||(L={}));const ct=(i,t,e)=>{e.fitBounds(t.bounds)};class dt extends O{constructor({map:t,markers:e=[],algorithm:n=new G({}),renderer:s=new at,onClusterClick:o=ct}){super(),this.markers=[...e],this.clusters=[],this.algorithm=n,this.renderer=s,this.onClusterClick=o,t&&this.setMap(t)}addMarker(t,e){this.markers.includes(t)||(this.markers.push(t),e||this.render())}addMarkers(t,e){t.forEach(n=>{this.addMarker(n,!0)}),e||this.render()}removeMarker(t,e){const n=this.markers.indexOf(t);return n===-1?!1:(t.setMap(null),this.markers.splice(n,1),e||this.render(),!0)}removeMarkers(t,e){let n=!1;return t.forEach(s=>{n=this.removeMarker(s,!0)||n}),n&&!e&&this.render(),n}clearMarkers(t){this.markers.length=0,t||this.render()}render(){const t=this.getMap();if(t instanceof google.maps.Map&&this.getProjection()){google.maps.event.trigger(this,L.CLUSTERING_BEGIN,this);const{clusters:e,changed:n}=this.algorithm.calculate({markers:this.markers,map:t,mapCanvasProjection:this.getProjection()});(n||n==null)&&(this.reset(),this.clusters=e,this.renderClusters()),google.maps.event.trigger(this,L.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(t=>t.setMap(null)),this.clusters.forEach(t=>t.delete()),this.clusters=[]}renderClusters(){const t=new rt(this.markers,this.clusters),e=this.getMap();this.clusters.forEach(n=>{n.markers.length===1?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,t),this.onClusterClick&&n.marker.addListener("click",s=>{google.maps.event.trigger(this,L.CLUSTER_CLICK,n),this.onClusterClick(s,n,e)})),n.marker.setMap(e)})}}class pt extends ${constructor(){super(...arguments),this.gMapsRef=void 0,this.maps={},this.currMarkerId=0,this.currPolygonId=0,this.currCircleId=0,this.currPolylineId=0,this.onClusterClickHandler=(t,e,n)=>{var s,o;const r=this.getIdFromMap(n),l=[];if(e.markers!=null)for(const a of e.markers){const c=this.getIdFromMarker(r,a);l.push({markerId:c,latitude:(s=a.getPosition())===null||s===void 0?void 0:s.lat(),longitude:(o=a.getPosition())===null||o===void 0?void 0:o.lng(),title:a.getTitle(),snippet:""})}this.notifyListeners("onClusterClick",{mapId:r,latitude:e.position.lat(),longitude:e.position.lng(),size:e.count,items:l})}}getIdFromMap(t){for(const e in this.maps)if(this.maps[e].map==t)return e;return""}getIdFromMarker(t,e){for(const n in this.maps[t].markers)if(this.maps[t].markers[n]==e)return n;return""}async importGoogleLib(t,e,n){if(this.gMapsRef===void 0){const s=await H(()=>import("./index.esm-d167425f.js"),[]),r=await new s.Loader({apiKey:t!=null?t:"",version:"weekly",libraries:["places"],language:n,region:e}).load();this.gMapsRef=r.maps,console.log("Loaded google maps API")}}async setCamera(t){this.maps[t.id].map.moveCamera({center:t.config.coordinate,heading:t.config.bearing,tilt:t.config.angle,zoom:t.config.zoom})}async getMapType(t){let e=this.maps[t.id].map.getMapTypeId();if(e!==void 0)return e==="roadmap"&&(e=_.Normal),{type:e};throw new Error("Map type is undefined")}async setMapType(t){let e=t.mapType.toLowerCase();e===_.Normal&&(e="roadmap"),this.maps[t.id].map.setMapTypeId(e)}async enableIndoorMaps(t){throw new Error("Method not supported on web.")}async enableTrafficLayer(t){var e;const n=(e=this.maps[t.id].trafficLayer)!==null&&e!==void 0?e:new google.maps.TrafficLayer;t.enabled?(n.setMap(this.maps[t.id].map),this.maps[t.id].trafficLayer=n):this.maps[t.id].trafficLayer&&(n.setMap(null),this.maps[t.id].trafficLayer=void 0)}async enableAccessibilityElements(t){throw new Error("Method not supported on web.")}dispatchMapEvent(t){throw new Error("Method not supported on web.")}async enableCurrentLocation(t){if(t.enabled)if(navigator.geolocation)navigator.geolocation.getCurrentPosition(e=>{const n={lat:e.coords.latitude,lng:e.coords.longitude};this.maps[t.id].map.setCenter(n),this.notifyListeners("onMyLocationButtonClick",{}),this.notifyListeners("onMyLocationClick",{})},()=>{throw new Error("Geolocation not supported on web browser.")});else throw new Error("Geolocation not supported on web browser.")}async setPadding(t){const e=this.maps[t.id].map.getBounds();e!==void 0&&this.maps[t.id].map.fitBounds(e,t.padding)}async getMapBounds(t){const e=this.maps[t.id].map.getBounds();if(!e)throw new Error("Google Map Bounds could not be found.");return new T({southwest:{lat:e.getSouthWest().lat(),lng:e.getSouthWest().lng()},center:{lat:e.getCenter().lat(),lng:e.getCenter().lng()},northeast:{lat:e.getNorthEast().lat(),lng:e.getNorthEast().lng()}})}async fitBounds(t){const e=this.maps[t.id].map,n=this.getLatLngBounds(t.bounds);e.fitBounds(n,t.padding)}async addMarkers(t){const e=[],n=this.maps[t.id];for(const s of t.markers){const o=this.buildMarkerOpts(s,n.map),r=new google.maps.Marker(o),l=""+this.currMarkerId;n.markers[l]=r,this.setMarkerListeners(t.id,l,r),e.push(l),this.currMarkerId++}return{ids:e}}async addMarker(t){const e=this.buildMarkerOpts(t.marker,this.maps[t.id].map),n=new google.maps.Marker(e),s=""+this.currMarkerId;return this.maps[t.id].markers[s]=n,this.setMarkerListeners(t.id,s,n),this.currMarkerId++,{id:s}}async removeMarkers(t){const e=this.maps[t.id];for(const n of t.markerIds)e.markers[n].setMap(null),delete e.markers[n]}async removeMarker(t){this.maps[t.id].markers[t.markerId].setMap(null),delete this.maps[t.id].markers[t.markerId]}async addPolygons(t){const e=[],n=this.maps[t.id];for(const s of t.polygons){const o=new google.maps.Polygon(s);o.setMap(n.map);const r=""+this.currPolygonId;this.maps[t.id].polygons[r]=o,this.setPolygonListeners(t.id,r,o),e.push(r),this.currPolygonId++}return{ids:e}}async removePolygons(t){const e=this.maps[t.id];for(const n of t.polygonIds)e.polygons[n].setMap(null),delete e.polygons[n]}async addCircles(t){const e=[],n=this.maps[t.id];for(const s of t.circles){const o=new google.maps.Circle(s);o.setMap(n.map);const r=""+this.currCircleId;this.maps[t.id].circles[r]=o,this.setCircleListeners(t.id,r,o),e.push(r),this.currCircleId++}return{ids:e}}async removeCircles(t){const e=this.maps[t.id];for(const n of t.circleIds)e.circles[n].setMap(null),delete e.circles[n]}async addPolylines(t){const e=[],n=this.maps[t.id];for(const s of t.polylines){const o=new google.maps.Polyline(s);o.set("tag",s.tag),o.setMap(n.map);const r=""+this.currPolylineId;this.maps[t.id].polylines[r]=o,this.setPolylineListeners(t.id,r,o),e.push(r),this.currPolylineId++}return{ids:e}}async removePolylines(t){const e=this.maps[t.id];for(const n of t.polylineIds)e.polylines[n].setMap(null),delete e.polylines[n]}async enableClustering(t){var e;const n=[];for(const s in this.maps[t.id].markers)n.push(this.maps[t.id].markers[s]);this.maps[t.id].markerClusterer=new dt({map:this.maps[t.id].map,markers:n,algorithm:new G({minPoints:(e=t.minClusterSize)!==null&&e!==void 0?e:4}),onClusterClick:this.onClusterClickHandler})}async disableClustering(t){var e;(e=this.maps[t.id].markerClusterer)===null||e===void 0||e.setMap(null),this.maps[t.id].markerClusterer=void 0}async onScroll(t){throw new Error("Method not supported on web.")}async create(t){console.log("Create map: ".concat(t.id)),await this.importGoogleLib(t.apiKey,t.region,t.language),this.maps[t.id]={map:new window.google.maps.Map(t.element,Object.assign({},t.config)),element:t.element,markers:{},polygons:{},circles:{},polylines:{}},this.setMapListeners(t.id)}async destroy(t){console.log("Destroy map: ".concat(t.id));const e=this.maps[t.id];e.element.innerHTML="",e.map.unbindAll(),delete this.maps[t.id]}async mapBoundsContains(t){const e=this.getLatLngBounds(t.bounds),n=new google.maps.LatLng(t.point.lat,t.point.lng);return{contains:e.contains(n)}}async mapBoundsExtend(t){const e=this.getLatLngBounds(t.bounds),n=new google.maps.LatLng(t.point.lat,t.point.lng);return e.extend(n),{bounds:new T({southwest:{lat:e.getSouthWest().lat(),lng:e.getSouthWest().lng()},center:{lat:e.getCenter().lat(),lng:e.getCenter().lng()},northeast:{lat:e.getNorthEast().lat(),lng:e.getNorthEast().lng()}})}}getLatLngBounds(t){return new google.maps.LatLngBounds(new google.maps.LatLng(t.southwest.lat,t.southwest.lng),new google.maps.LatLng(t.northeast.lat,t.northeast.lng))}async setCircleListeners(t,e,n){n.addListener("click",()=>{this.notifyListeners("onCircleClick",{mapId:t,circleId:e,tag:n.get("tag")})})}async setPolygonListeners(t,e,n){n.addListener("click",()=>{this.notifyListeners("onPolygonClick",{mapId:t,polygonId:e,tag:n.get("tag")})})}async setPolylineListeners(t,e,n){n.addListener("click",()=>{this.notifyListeners("onPolylineClick",{mapId:t,polylineId:e,tag:n.get("tag")})})}async setMarkerListeners(t,e,n){n.addListener("click",()=>{var s,o;this.notifyListeners("onMarkerClick",{mapId:t,markerId:e,latitude:(s=n.getPosition())===null||s===void 0?void 0:s.lat(),longitude:(o=n.getPosition())===null||o===void 0?void 0:o.lng(),title:n.getTitle(),snippet:""})}),n.addListener("dragstart",()=>{var s,o;this.notifyListeners("onMarkerDragStart",{mapId:t,markerId:e,latitude:(s=n.getPosition())===null||s===void 0?void 0:s.lat(),longitude:(o=n.getPosition())===null||o===void 0?void 0:o.lng(),title:n.getTitle(),snippet:""})}),n.addListener("drag",()=>{var s,o;this.notifyListeners("onMarkerDrag",{mapId:t,markerId:e,latitude:(s=n.getPosition())===null||s===void 0?void 0:s.lat(),longitude:(o=n.getPosition())===null||o===void 0?void 0:o.lng(),title:n.getTitle(),snippet:""})}),n.addListener("dragend",()=>{var s,o;this.notifyListeners("onMarkerDragEnd",{mapId:t,markerId:e,latitude:(s=n.getPosition())===null||s===void 0?void 0:s.lat(),longitude:(o=n.getPosition())===null||o===void 0?void 0:o.lng(),title:n.getTitle(),snippet:""})})}async setMapListeners(t){const e=this.maps[t].map;e.addListener("idle",async()=>{var n,s;const o=await this.getMapBounds({id:t});this.notifyListeners("onCameraIdle",{mapId:t,bearing:e.getHeading(),bounds:o,latitude:(n=e.getCenter())===null||n===void 0?void 0:n.lat(),longitude:(s=e.getCenter())===null||s===void 0?void 0:s.lng(),tilt:e.getTilt(),zoom:e.getZoom()})}),e.addListener("center_changed",()=>{this.notifyListeners("onCameraMoveStarted",{mapId:t,isGesture:!0})}),e.addListener("bounds_changed",async()=>{var n,s;const o=await this.getMapBounds({id:t});this.notifyListeners("onBoundsChanged",{mapId:t,bearing:e.getHeading(),bounds:o,latitude:(n=e.getCenter())===null||n===void 0?void 0:n.lat(),longitude:(s=e.getCenter())===null||s===void 0?void 0:s.lng(),tilt:e.getTilt(),zoom:e.getZoom()})}),e.addListener("click",n=>{var s,o;this.notifyListeners("onMapClick",{mapId:t,latitude:(s=n.latLng)===null||s===void 0?void 0:s.lat(),longitude:(o=n.latLng)===null||o===void 0?void 0:o.lng()})}),this.notifyListeners("onMapReady",{mapId:t})}buildMarkerOpts(t,e){var n;let s;return t.iconUrl&&(s={url:t.iconUrl,scaledSize:t.iconSize?new google.maps.Size(t.iconSize.width,t.iconSize.height):null,anchor:t.iconAnchor?new google.maps.Point(t.iconAnchor.x,t.iconAnchor.y):new google.maps.Point(0,0),origin:t.iconOrigin?new google.maps.Point(t.iconOrigin.x,t.iconOrigin.y):new google.maps.Point(0,0)}),{position:t.coordinate,map:e,opacity:t.opacity,title:t.title,icon:s,draggable:t.draggable,zIndex:(n=t.zIndex)!==null&&n!==void 0?n:0}}}export{pt as CapacitorGoogleMapsWeb};
